#
# Automatically generated configuration
#

#CONFIG_TARGET_aarch64=y
#CONFIG_TARGET_aarch64_generic=y
#CONFIG_TARGET_IMAGES=y
#CONFIG_TARGET_ROOTFS_TAR=y
CONFIG_TARGET_armsr=y
CONFIG_TARGET_armsr_armv8=y
CONFIG_TARGET_armsr_armv8_DEVICE_generic=y

# Rootfs 打包格式
CONFIG_TARGET_ROOTFS_TARGZ=y


#
# Base system
#
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-base=y
CONFIG_PACKAGE_luci-lib-ip=y
CONFIG_PACKAGE_luci-mod-admin-full=y
CONFIG_PACKAGE_luci-app-opkg=y
CONFIG_PACKAGE_luci-compat=y
CONFIG_PACKAGE_luci-i18n-base-zh-cn=y

# LuCI 应用
CONFIG_PACKAGE_luci-app-ddns=y
CONFIG_PACKAGE_luci-i18n-ddns-zh-cn=y
CONFIG_PACKAGE_luci-app-samba4=y
CONFIG_PACKAGE_luci-i18n-samba4-zh-cn=y
CONFIG_PACKAGE_luci-app-nfs=y

# LuCI 主题
CONFIG_PACKAGE_luci-theme-argon=y
CONFIG_PACKAGE_luci-app-argon-config=y

#
# Proxy core
#
CONFIG_PACKAGE_passwall=y
CONFIG_PACKAGE_luci-app-passwall=y
CONFIG_PACKAGE_luci-app-passwall2=y
CONFIG_PACKAGE_helloworld=y
CONFIG_PACKAGE_luci-app-ssr-plus=y
CONFIG_PACKAGE_naiveproxy=y
CONFIG_PACKAGE_xray-core=y
CONFIG_PACKAGE_hysteria=y
CONFIG_PACKAGE_sing-box=y
CONFIG_PACKAGE_luci-app-openclash=y
CONFIG_PACKAGE_luci-app-geoip=y

#
# Network enhancement
#
CONFIG_PACKAGE_iptables=y
CONFIG_PACKAGE_iptables-mod-tproxy=y
CONFIG_PACKAGE_iptables-mod-socket=y
CONFIG_PACKAGE_iptables-mod-iprange=y
CONFIG_PACKAGE_iptables-mod-conntrack-extra=y
CONFIG_PACKAGE_kmod-ipt-nat=y
CONFIG_PACKAGE_kmod-nft-socket=y
CONFIG_PACKAGE_kmod-nft-tproxy=y

#
# System settings
#
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_wget=y
CONFIG_PACKAGE_ca-certificates=y
CONFIG_PACKAGE_openssl-util=y
CONFIG_PACKAGE_coreutils=y

#内核相关
CONFIG_PACKAGE_kmod-ipt-mark=y
CONFIG_PACKAGE_kmod-nf-conntrack=y
CONFIG_PACKAGE_kmod-nf-conntrack6=y
# 1. 首先确保选中 IPSET 核心功能
CONFIG_PACKAGE_ipset=y

# 2. 启用内核中的 NETFILTER 扩展和 IPSET 支持
CONFIG_KERNEL_NETFILTER_XT_SET=y

# 3. 确保以下 OpenWrt 的内核模块被编译进去：
CONFIG_PACKAGE_kmod-ip-set=y
CONFIG_PACKAGE_kmod-ipt-ipset=y

# 4. 同时建议检查并启用以下相关模块，以确保完整的分流功能：
CONFIG_PACKAGE_kmod-ipt-tproxy=y      # 用于 TPROXY 模式
CONFIG_PACKAGE_kmod-ipt-comment=y     # 用于规则注释
CONFIG_PACKAGE_kmod-nf-tproxy=y       # TPROXY 核心支持
CONFIG_PACKAGE_kmod-nf-nat=y          # NAT 功能
CONFIG_PACKAGE_iptables-mod-ipset=y   # iptables 的 ipset 扩展

# 5. 如果使用 IPv6，还需要对应的模块：
# CONFIG_PACKAGE_kmod-ip6-set=y
# CONFIG_PACKAGE_kmod-ipt-ip6set=y

